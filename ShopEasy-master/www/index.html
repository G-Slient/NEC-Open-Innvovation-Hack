<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="mobileui/style.css">
        <link rel="stylesheet" href="css/easy-autocomplete.min.css">
        <meta name="format-detection" content="telephone=no">
        <meta charset="utf-8">
        <meta name="msapplication-tap-highlight" content="no">
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
        <link rel="stylesheet" type="text/css" href="css/index.css">
        <script type="text/javascript" src="js/qrcode.js"></script>
        <title>Apache Cordova</title>
    </head>
    <body>

      <div 
          id="loginPage" >
          <h1 style="
    font-size: 40px;
    text-align: center;
    text: -webkit-match-parent;
    color: black;
    text-shadow: 5px 5px #3F51B5;
">QNahi</h1>
            <input 
              type="text" 
              id="useridInput" 
              class="radius" 
              name="userid"
              placeholder="Enter userid" 
              style="
                padding: 10px;
                height: 50px;
                position: absolute;
                background-color: white;
                top: 50%;
                width: 60%;
                margin-left: 16%;
            ">
            <button 
              class="black radius"
              style="font-size: 25px;position: absolute;top:65%;margin-left: 29%;padding: 5px;width: 119px;"
              onclick="login()" 
              >Login</button>
        </div>  

        <!-- select page -->
         <div id="selectView">

             <!-- Header -->
        <div class="header blue-900">
          <div class="left">
            <button class="icon ion-chevron-left"></button>
          </div>
          <h1><strong>QNahi</strong></h1>
          <div class="right">
            <img src="img/wallet.png" height="25px" style="position: absolute;right: 100px;">
            <h2 style="position: absolute;right: 19px">Rs.<span class="walletMoney">1600</span></h2>
          </div>
        </div>


            <h2 style="position: absolute;top:15%;left:33%;font-size:21px;text-shadow: 1px 2px #aee4e4" ><strong>Explore Store</strong></h2>
            <img 
            src="img/store.png"
            style="position: absolute;top:21%;left:30%;border-radius: 25%; padding: 16px;" 
            onclick="exploreStore()" 
            >
            <h2 style="position: absolute;top:54%;left:33%;font-size:21px; text-shadow: 1px 2px #aee4e4" ><strong>Start Shopping</strong></h2>
            <img 
            src="img/shop.png"
            style="position: absolute;top:60%; left:30%;border-radius: 25%; padding: 16px;  "
            onclick="startShopping()" 
            >
        </div>


        <!-- make list page -->
        <div id="exploreView">
           <!-- Header -->
        <div class="header blue-900">
          <div class="left" onclick="back1()">
            <button class="icon ion-chevron-left" ></button>
          </div>
          <h1><strong>QNahi</strong></h1>
          <div class="right">
            <img src="img/wallet.png" height="25px" style="position: absolute;right: 100px;">
            <h2 style="position: absolute;right: 19px">Rs.<span class="walletMoney">1600</span></h2>
          </div>
        </div>

            <!-- Add Item input -->
            <div class="list" style="margin-top: 20%;">
              <div class="item label-fixed">
                <input 
                type="text" 
                id="itemInput" 
                placeholder="Search Item"
                style="height: 40px;" 
                >
                <button  
                class="light-blue radius" 
                onclick="addItem()" 
                >Add Item</button>
              </div>
            </div>

            <!-- Item list div -->
            <div class="list padding grey-100" id="itemList">
            
            </div>

            <!-- Check Store Button -->
            <div class="item float-bottom-right">
                <button 
                class="blue-900 radius" 
                style="right: 40%;"
                onclick="recommendStore()">
                Check Nearby Stores
                </button>
            </div>            
        </div>

        <!-- recommended stores page -->
        <div id="recommendedStores">
           <!-- Header -->
        <div class="header blue-900">
          <div class="left" onclick="back3()">
            <button class="icon ion-chevron-left"></button>
          </div>
          <h1><strong>QNahi</strong></h1>
          <div class="right">
            <img src="img/wallet.png" height="25px" style="position: absolute;right: 100px;">
            <h2 style="position: absolute;right: 19px">Rs.<span class="walletMoney">1600</span></h2>
          </div>
        </div>

            <h2 
            style="display: flex;justify-content: center;font-size: 20px;margin-bottom: 17px;text-shadow: 1px 1px #03a9f4">
            <strong>Recommended Stores</strong>
            </h2>
            <body class="padding grey-100">
              <div id="mallList" class="list radius white">

              </div>
            </body>
        </div>

        <!-- start shopping page -->
        <div id="selectStore" style="top:12%; position: absolute;">
             <!-- Header -->
        <div class="header blue-900">
          <div class="left" onclick="back2()">
            <button class="icon ion-chevron-left"></button>
          </div>
          <h1><strong>QNahi</strong></h1>
          <div class="right">
            <img src="img/wallet.png" height="25px" style="position: absolute;right: 100px;">
            <h2 style="position: absolute;right: 19px">Rs.<span class="walletMoney">1600</span></h2>
          </div>
        </div>

            <h2 
            style="display: flex;justify-content: center;font-size: 20px;margin-bottom: 17px;text-shadow: 1px 1px #03a9f4">
            <strong>Select Store</strong>
            </h2>
            <body class="padding grey-100">
              <div id="mallList" class="list radius white">
                  <div class="item" onclick="visitedStore(1)">
                    <div class="left"><img class="avatar radius" src="img/store.png"></div>
                    <h2><strong>Store 1</strong></h2>
                    <p class="text-grey-500">Address</p>
                        <div class="right">
                            <i class="icon ion-android-locate" style="font-size: 35px;position: absolute;right: 18px; color:#0d47a1">
                            </i>
                        </div>
                    </div>
                  <div class="item" onclick="visitedStore(2)">
                    <div class="left"><img class="avatar radius" src="img/store.png"></div>
                    <h2><strong>Store 2</strong></h2>
                    <p class="text-grey-500">Address</p>
                        <div class="right">
                            <i class="icon ion-android-locate" style="font-size: 35px;position: absolute;right: 18px; color:#0d47a1">
                            </i>
                        </div>
                    </div>
                  <div class="item" onclick="visitedStore(3)">
                    <div class="left"><img class="avatar radius" src="img/store.png"></div>
                    <h2><strong>Store 3</strong></h2>
                    <p class="text-grey-500">Address</p>
                        <div class="right">
                            <i class="icon ion-android-locate" style="font-size: 35px;position: absolute;right: 18px; color:#0d47a1">
                            </i>
                        </div>
                    </div>
                  <div class="item" onclick="visitedStore(4)">
                    <div class="left"><img class="avatar radius" src="img/store.png"></div>
                    <h2><strong>Store 4</strong></h2>
                    <p class="text-grey-500">Address</p>
                        <div class="right">
                            <i class="icon ion-android-locate" style="font-size: 35px;position: absolute;right: 18px; color:#0d47a1">
                            </i>
                        </div>
                    </div>
                  <div class="item" onclick="visitedStore(5)">
                    <div class="left"><img class="avatar radius" src="img/store.png"></div>
                    <h2><strong>Store 5</strong></h2>
                    <p class="text-grey-500">Address</p>
                        <div class="right">
                            <i class="icon ion-android-locate" style="font-size: 35px;position: absolute;right: 18px; color:#0d47a1">
                            </i>
                        </div>
                    </div>
              </div>
            </body>
        </div>

        <div id="shopView" style="overflow: auto;">
           <!-- Header -->
        <div class="header blue-900">
          <div class="left" onclick="back4()">
            <button class="icon ion-chevron-left"></button>
          </div>
          <h1><strong>QNahi</strong></h1>
          <div class="right">
            <img src="img/wallet.png" height="25px" style="position: absolute;right: 100px;">
            <h2 style="position: absolute;right: 19px">Rs.<span class="walletMoney">1600</span></h2>
          </div>
        </div>

            <div class="item">
                <img 
                    src="img/qr.png"
                    style="height: 60px;position: absolute;left: 40%;top:14%"
                    onclick="scan()" 
                >
                <!--<h2 style="position: absolute;left: 37%;font-size: 19px;top:17%; text-shadow: 1px 1px #e7b99b;">
                <strong>Scan QR</strong>
                </h2> -->
                <h2 id="a" style="color: black"></h2>
            </div>
      
            <!-- generated cart -->
            <div class="list padding grey-100" id="itemCart">

             
            </div>

            <div class="list padding grey-100" id="recommendedItem">
            
            </div>

            <!-- checkout -->
            <div id="checkout" 
                style="bottom: 0%;left:0%;position: fixed;width: 100%;background-color: #0a377c;color: white;padding: 10px;"
            >
             <!-- Header -->
        <div class="header blue-900">
          <div class="left" onclick="back5()">
            <button class="icon ion-chevron-left"></button>
          </div>
          <h1><strong>QNahi</strong></h1>
          <div class="right">
            <img src="img/wallet.png" height="25px" style="position: absolute;right: 100px;">
            <h2 style="position: absolute;right: 19px">Rs.<span class="walletMoney">1600</span></h2>
          </div>
        </div>

              <h2><strong style="font-size: 18px;padding: 20px;" id="totalAmount">Total: Rs.90 </strong></h2>
              <button 
                class="white radius" 
                onclick="billGeneration()" 
                style="left:65%;width: 100px ">
                <strong >Pay</strong>
              </button>
            </div>

            </div>
        </div>

        <!-- add and subtract item from cart -->
       <!--  <div class="item white mark border-light-blue margin-button shadow">
            <h2><strong>Maggi</strong></h2>
            <button class="green right radius" style="right: 60px; font-size: 26px;height: 80%;top:3px;">+</button>
            <h2 class="right" style="right: 55px;font-size: 18px"><strong>2</strong></h2>
            <button class="red right radius" style="right:-10px;font-size: 30px;height: 80%;top:3px;">-</button>
        </div> -->


        <!-- guard qr check view -->
        <div id="guardSection" style="position: absolute;">
        <div class="header blue-900">
          <div class="left" >
            <button class="icon ion-chevron-left"></button>
          </div>
          <h1><strong>QNahi</strong></h1>
          
        </div>
        <img 
          src="img/qrCheck.png"  
          onclick="checkQr()"
          style="
          /* width: 200px; */
          height: 200px;
          height: 200px;
          margin-left: 35%;
          /* bottom: 50%; */
          /* position: absolute; */
          margin-top: -100%;
      ">
          <h2 style="width: 100%;margin-top: 20%;margin-left: 54%;font-size: 24px;text-shadow: 1px 2px #aee4e4;" ><strong>Verify QR</strong></h2>
        </div>
        
        <!-- qr verified -->
        <div id="qrVerified" style="height: 100%;width: 100%">
          <div class="header blue-900">
          <div class="left">
            <button class="icon ion-chevron-left"></button>
          </div>
          <h1><strong>QNahi</strong></h1>
          
        </div>
          <h2>Verified!</h2>
          <img src="img/happy.png" style="
    top: 5%;
    position: absolute;
">
          <h2>Happy Shopping!</h2>
        </div>  

        <!-- billing qr page -->
        <div id="billingQr" style="top:40%;position: absolute;">
         <!-- Header -->
        <div class="header blue-900">
          <div class="left" onclick="back6()">
            <button class="icon ion-chevron-left" 
            onclick=""></button>
          </div>
          <h1><strong>QNahi</strong></h1>
          <div class="right">
            <img src="img/wallet.png" height="25px" style="position: absolute;right: 100px;">
            <h2 style="position: absolute;right: 19px">Rs.<span class="walletMoney">1600</span></h2>
          </div>
        </div>

          <h2><strong style="font-size: 30px;margin-left: 50%;color: #124ca7;position: absolute;bottom:120%;">SUCCESS!</strong></h2>
          <div id="placeHolder" 
          style="margin-left: 40%; width: 100%;"
          ></div>


    <script type="text/javascript">

    var model = function(store_id,id){
    var get_text = id;
    var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
		    if (this.readyState == 4 && this.status == 200) {
	        console.log("Done!");
          console.log(JSON.parse(xhttp.responseText));
          var data =JSON.parse(xhttp.responseText);
						item_name = data[0].name;
						item_id = data[0].item_id;
						price = data[0].price;
            offer = "BUY 1 GET 1";
            console.log(item_name);
            var quant =1;
            var cartItem = '<div id="heyyyy" class="item white mark border-light-blue margin-button shadow"><h2><strong>'+item_name+'</strong></h2><h2>Rs.'+price+'</h2><span style=" background-color:#2196f3 ; color: white;">'+offer+'</span><button class="green right radius" style="right: 25%; font-size: 26px;height: 20px;top:3px;" onclick="add(this)">+</button><h2 class="right" style="right: 55px;font-size: 18px"><strong style="position: absolute;right: 21%;top: 10%;">'+quant+'</strong></h2><button class="red right radius" onclick="sub(this)" style="right:3%;font-size: 30px;height: 20px;top:3px;">-</button></div>';
            document.getElementById("selectView").innerHTML = cartItem;
		    }
		};
    
    if(store_id=="1")
    {
      url = "http://127.0.0.1:8008/retrieve1?id="+get_text;
    }
    else if(store_id=="2")
    {
      url = "http://127.0.0.1:8008/retrieve2?id="+get_text;
    }
    else if(store_id=="3")
    {
      url = "http://127.0.0.1:8008/retrieve3?id="+get_text;
    }
    else if(store_id=="4")
    {
      url = "http://127.0.0.1:8008/retrieve4id="+get_text;
    }
    else if(store_id=="5")
    {
      url = "http://127.0.0.1:8008/retrieve5?id="+get_text;
    }
    


    //url = "http://127.0.0.1:8008/retrieve?id="+get_text;
    xhttp.open("GET", url, true);
    //xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
		xhttp.send();
    }
</script>

        <script type="text/javascript" src="cordova.js"></script>
       
        <!-- <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script> -->
         <script src="js/jquery-1.11.2.min.js"></script>

        <script src="js/jquery.easy-autocomplete.min.js"></script> 
        <script type="text/javascript" src="mobileui/mobileui.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        
        <script type="text/javascript" src="../backendservice/list.js"></script>
    </body>
</html>
